#!/usr/bin/env node
import "temporal-polyfill/global";

import { ArgumentParser } from "argparse";

const parser = new ArgumentParser({
  prog: "advent-of-code",
  description: "Advent of Code runner",
});

const subparsers = parser.add_subparsers({ dest: "command", required: true });

const solve_parser = subparsers.add_parser("solve", {
  description: "Solve a puzzle",
});

solve_parser.add_argument("--midnight", { action: "store_true" });
solve_parser.add_argument("--day", { type: "int", required: true });
solve_parser.add_argument("--year", { type: "int", required: true });

const args = parser.parse_args();

(async () => {
  switch (args.command) {
    case "solve":
      const { solve } = await import("./solve.js");
      await solve(args);
      break;
  }
})().catch((error) => {
  console.error(error);
  process.exit(1);
});
